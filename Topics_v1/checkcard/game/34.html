<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>2*3</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden; /* 禁用滾輪 */
    }

    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-color: #ffffff;
      font-family: "標楷體", "Microsoft JhengHei", "Noto Sans TC", sans-serif;
      -webkit-font-smoothing: antialiased;
    }

    h2 {
      font-size: 28px;
      margin-bottom: 20px;
      color: #2c3e50;
    }

    .keyboard {
      display: flex;
      flex-direction: column;
      gap: 16px;
      background-color: #f7f3e9;
      padding: 30px 40px;
      border-radius: 25px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      user-select: none;
    }

    .row {
      display: flex;
      justify-content: center;
      gap: 16px;
    }

    .cell {
      width: 120px;
      height: 120px;
      font-size: 50px;
      font-weight: bold;
      border: none;
      border-radius: 18px;
      cursor: pointer;
      box-shadow: 0 5px 12px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease-in-out;
      color: #2c3e50;
      display: flex;
      justify-content: center;
      align-items: center;
      user-select: none;
      background-color: white;
    }

    .color1 {
      background-color: #8e8e8e;
      color: white;
    }

    .color2 {
      background-color: #f5f5f5;
    }

    .selected {
      outline: 5px solid #7f8c8d;
      outline-offset: -5px;
    }

    /* 邊框提示等級動畫 */
    .hint-border-level-1 {
      animation: borderGlow 1s forwards;
      box-shadow: 0 0 5px 3px rgba(255, 165, 0, 0.3);
    }

    .hint-border-level-2 {
      animation: borderGlow 1s forwards;
      box-shadow: 0 0 8px 5px rgba(255, 140, 0, 0.5);
    }

    .hint-border-level-3 {
      animation: borderGlow 1s forwards;
      box-shadow: 0 0 12px 7px rgba(255, 69, 0, 0.8);
    }

    @keyframes borderGlow {
      from {
        box-shadow: 0 0 0 0 rgba(255, 165, 0, 0);
      }
      to {
        /* class 控制結束狀態 */
      }
    }
  </style>
</head>
<body onload="startNewGame()">
  <h2 style="display:none;"><div>計時:<span id="timer" id="timer">0</span>秒</div></h2>
  <h2 style="font-size: 50px;text-align: center;" id="title" name="title">請選擇2個相同數字</h2>
<div class="keyboard">
  <div class="row">
    <button class="cell color1"></button>
    <button class="cell color2"></button>
    <button class="cell color1"></button>
  </div>
  <div class="row">
    <button class="cell color2"></button>
    <button class="cell color1"></button>
    <button class="cell color2"></button>
  </div>
</div>
   <script>
    const maxNum = 20;
    let repeatedNumber = 0;
    let timerId = null;
    let hintIntervalId = null;
    let seconds = 0;
    let hintCount = 0;
    const timerElement = document.getElementById('timer');

    function updateTimer() {
      seconds++;
      timerElement.innerText = seconds;
      localStorage.setItem("reminderTime", seconds);
    }

    function startNewGame() {
      clearInterval(timerId);
      clearInterval(hintIntervalId);
      localStorage.removeItem("count2");
      seconds = 0;
      hintCount = 0;
      timerElement.innerText = "0";
      timerId = setInterval(updateTimer, 1000);

      const buttons = Array.from(document.querySelectorAll('.cell'));
      const total = buttons.length;

      repeatedNumber = Math.floor(Math.random() * maxNum) + 1;
      let numbers = [repeatedNumber, repeatedNumber];
      const used = new Set(numbers);

      while (numbers.length < total) {
        const num = Math.floor(Math.random() * maxNum) + 1;
        if (!used.has(num)) {
          numbers.push(num);
          used.add(num);
        }
      }

      numbers.sort(() => Math.random() - 0.5);

      buttons.forEach((button, idx) => {
        button.textContent = numbers[idx];
        button.className = 'cell ' + (idx % 2 === 0 ? 'color1' : 'color2');
        button.onclick = () => {
          button.classList.toggle('selected');
          checkIfMatchAndEndGame();
        };
      });

      hintIntervalId = setInterval(showHint, 20000);
    }

     function checkIfMatchAndEndGame() {
      const buttons = Array.from(document.querySelectorAll('.cell'));
      const selected = buttons.filter(btn => btn.classList.contains('selected'));
      const matched = selected.filter(btn => parseInt(btn.textContent) === repeatedNumber);

      if (matched.length === 2) {
          clearInterval(timerId);
          clearInterval(hintIntervalId);
          window.location.href = "35.html";
      } else if (selected.length === 2 && matched.length !== 2) {
          // 配對錯誤
          let count2 = parseInt(localStorage.getItem("count2")) || 0;
          count2++;
          localStorage.setItem("count2", count2);
          document.getElementById("title").textContent = "❌ 配對錯誤，請再次點選相同數字";
          // 過一段時間後清除選取狀態
          setTimeout(() => {
            selected.forEach(btn => btn.classList.remove('selected'));
            document.getElementById("title").textContent = "請選擇兩個相同的數字";
          }, 500); // 1秒後清除
        }
    }

    function showHint() {
      hintCount++;
      const level = Math.min(hintCount, 3);
      const buttons = document.querySelectorAll('.cell');

      buttons.forEach(btn => {
        if (parseInt(btn.textContent) === repeatedNumber) {
          btn.classList.remove('hint-border-level-1', 'hint-border-level-2', 'hint-border-level-3');
          btn.classList.add(`hint-border-level-${level}`);
        }
      });
    }
  </script>
</body>
</html>